<!DOCTYPE html>
<html ng-app="geolocalizador" lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Geo-Localizador de Coordenadas">
	<meta name="author" content="Smurf Dad">
	<link rel="favicon" type="image/ico" href="favicon.ico" />
	<link rel="shortcut icon" type="image/ico" href="favicon.ico" />
	<link rel="icon" type="image/ico" href="favicon.ico" />

	<title>@Smurf_Dad :: Localizador de Coordenadas</title>
	<link href='http://cdn.smurfdad.es/assets/bootstrap/3.3.1/css/bootstrap.min.css' rel='stylesheet' type='text/css'/>
	<link href='http://cdn.smurfdad.es/sprites/icon-round-social/css.css' rel='stylesheet' type='text/css'/>
	<link href='http://cdn.smurfdad.es/css/bs-callout.css' rel='stylesheet' type='text/css'/>
	<link href='css/style.css' rel='stylesheet' type='text/css'/>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
	<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body ng-controller="geoLocalizadorController as geoCtrl" ng-cloak>
	<header class="page-header container">
		<h1>Localizador de Coordenadas</h1>
	</header>
	<main class="container">
		<form role="form" name="formulario" novalidate ng-submit="geoCtrl.buscar()">
			<div class="form-group">
				<label for="direcciones">Direcciones a buscar</label>
				<textarea id="direcciones" ng-model="geoCtrl.direcciones" class="form-control" placeholder="Introduzca una direcci&oacute;n por l&iacute;nea" required></textarea>
			</div>
			<div class="form-group">
				<button type="submit" class="btn btn-primary" ng-disabled="formulario.$invalid" ng-hide="geoCtrl.state.running">Buscar</button>
				<button type="button" class="btn btn-danger" ng-show="geoCtrl.state.running" ng-click="geoCtrl.parar()">Parar</button>
				<button type="reset" class="btn btn-default" ng-disabled="geoCtrl.direcciones == null && geoCtrl.listaResultados.length == 0" ng-click="geoCtrl.limpiar()" ng-hide="geoCtrl.state.running">Limpiar</button>
			</div>
		</form>
		<div class="progress" ng-if="geoCtrl.state.running">
			<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" ng-style="{width: geoCtrl.state.percent()+'%'}">{{geoCtrl.state.percent() }}%</div>
		</div>
		<div ng-repeat="busqueda in geoCtrl.listaResultados" class="bs-callout" ng-class="busqueda.hasResults()?'bs-callout-success':'bs-callout-danger'">
			<button type="button" class="close" ng-click="geoCtrl.descartar($index, null)" title="Descartar"><span aria-hidden="true">&times;</span></button>
			<h2>{{busqueda.termino}}</h2>
			<div class="table-responsive" ng-if="busqueda.hasResults()">
				<table class="table table-condensed">
					<tr>
						<th>Dirección</th>
						<th>Longitud (X)</th>
						<th>Latitud (Y)</th>
						<th>Precisión</th>
						<th></th>
					</tr>
					<tr ng-repeat="candidato in busqueda.candidatos">
						<td>{{candidato.direccion}}</td>
						<td>{{candidato.coordenadas.longitud}}</td>
						<td>{{candidato.coordenadas.latitud}}</td>
						<td>{{candidato.precision}}</td>
						<td><button class="btn btn-danger btn-xs" ng-click="geoCtrl.descartar($parent.$index, $index)" title="Descartar"><span class="glyphicon glyphicon-remove"></span></button></td>
					</tr>	
				</table>
			</div>
			<div ng-if="!busqueda.hasResults()">No hay resultados para este término de búsqueda</div>
		</div>
		<div class="push"></div>
	</main>
	<ng-include src="'html/footer.html'"></ng-include>
	<script	src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js' type='text/javascript'></script>
	<script src='http://cdn.smurfdad.es/assets/bootstrap/3.3.1/js/bootstrap.min.js' type='text/javascript'></script>
	<script src="js/app.js"></script>
	<script src="js/datamodel.js"></script>	
	<script src="js/geoLocalizadorController.js"></script>	
	<script src="js/googleanalytics.js"></script>
</body>
</html>